// ÆLang Actually Working Feature Test
// Tests ONLY the features that are verified to work

extern print(msg: str);
extern print_int(val: i32);
extern print_float(val: f32);
extern read_int(): i32;

func add(a: i32, b: i32): i32 {
    return a + b;
}

func subtract(a: i32, b: i32): i32 {
    return a - b;
}

func multiply(a: i32, b: i32): i32 {
    return a * b;
}

func divide(a: i32, b: i32): i32 {
    if b == 0 {
        return 0;
    }
    return a / b;
}

func absolute(x: i32): i32 {
    if x < 0 {
        return -x;
    }
    return x;
}

func factorial(n: i32): i32 {
    if n <= 1 {
        return 1;
    }
    return n * factorial(n - 1);
}

func maximum(a: i32, b: i32): i32 {
    if a > b {
        return a;
    }
    return b;
}

func float_add(a: f32, b: f32): f32 {
    return a + b;
}

func main(): void {
    print("=== ÆLang Working Feature Test ===");
    
    // Test 1: Basic Variables
    print("1. Testing Variables:");
    let x: i32 = 10;
    let y: i32 = 5;
    let z: f32 = 3.14;
    
    print("Integer variables:");
    print_int(x);
    print_int(y);
    print("Float variable:");
    print_float(z);
    
    // Test 2: Arithmetic
    print("2. Testing Arithmetic:");
    print("Addition (10 + 5):");
    print_int(add(x, y));
    print("Subtraction (10 - 5):");
    print_int(subtract(x, y));
    print("Multiplication (10 * 5):");
    print_int(multiply(x, y));
    print("Division (10 / 5):");
    print_int(divide(x, y));
    
    // Test 3: Comparisons
    print("3. Testing Comparisons:");
    if x > y {
        print("10 > 5: TRUE");
    } else {
        print("10 > 5: FALSE");
    }
    
    if x == y {
        print("10 == 5: TRUE");
    } else {
        print("10 == 5: FALSE");
    }
    
    // Test 4: Mathematical Functions
    print("4. Testing Functions:");
    print("Absolute value of -15:");
    print_int(absolute(-15));
    print("Maximum of 8 and 12:");
    print_int(maximum(8, 12));
    print("Factorial of 5:");
    print_int(factorial(5));
    
    // Test 5: Float Operations
    print("5. Testing Float Operations:");
    let a: f32 = 2.5;
    let b: f32 = 1.5;
    print("Float addition (2.5 + 1.5):");
    print_float(float_add(a, b));
    
    // Test 6: Nested If-Else
    print("6. Testing Nested Conditions:");
    let score: i32 = 85;
    if score >= 90 {
        print("Grade: A");
    } else {
        if score >= 80 {
            print("Grade: B");
        } else {
            if score >= 70 {
                print("Grade: C");
            } else {
                print("Grade: F");
            }
        }
    }
    
    // Test 7: Interactive I/O
    print("7. Testing Interactive Input:");
    print("Enter a number:");
    let user_num: i32 = read_int();
    print("You entered:");
    print_int(user_num);
    print("Its absolute value:");
    print_int(absolute(user_num));
    print("Its factorial:");
    print_int(factorial(user_num));
    
    print("=== All Working Features Tested ===");
    print("✓ Variable declarations (i32, f32)");
    print("✓ Arithmetic operations (+, -, *, /)");
    print("✓ Comparison operations (>, ==, etc.)");
    print("✓ If-else statements");
    print("✓ Function definitions and calls");
    print("✓ Recursion");
    print("✓ Interactive input/output");
    print("✓ Float arithmetic");
    print("ÆLang working feature test completed!");
}
