extern print_int(val: i32);
extern print_float(val: f32);
extern read_int(): i32;

const PI: f32 = 3.14159;
const MAX_VALUE: i32 = 100;

func add(a: i32, b: i32): i32 {
    return a + b;
}

func subtract(a: i32, b: i32): i32 {
    return a - b;
}

func multiply(a: i32, b: i32): i32 {
    return a * b;
}

func divide(a: i32, b: i32): i32 {
    if b == 0 {
        return 0;
    }
    return a / b;
}

func is_equal(a: i32, b: i32): i32 {
    if a == b {
        return 1;
    }
    return 0;
}

func is_greater(a: i32, b: i32): i32 {
    if a > b {
        return 1;
    }
    return 0;
}

func absolute(x: i32): i32 {
    if x < 0 {
        return -x;
    }
    return x;
}

func factorial(n: i32): i32 {
    if n <= 1 {
        return 1;
    }
    return n * factorial(n - 1);
}

func power(base: i32, exp: i32): i32 {
    if exp == 0 {
        return 1;
    }
    
    let result: i32 = 1;
    let counter: i32 = 0;
    
    while counter < exp {
        result = result * base;
        counter = counter + 1;
    }
    
    return result;
}

func circle_area(radius: f32): f32 {
    return PI * radius * radius;
}

func main(): void {
    print("=== ÆLang Comprehensive Feature Test ===");
    
    print("1. Testing Constants:");
    print("MAX_VALUE =");
    print_int(MAX_VALUE);
    print("PI =");
    print_float(PI);
    
    print("2. Testing Basic Arithmetic:");
    print("5 + 3 =");
    print_int(add(5, 3));
    print("10 - 4 =");
    print_int(subtract(10, 4));
    print("6 * 7 =");
    print_int(multiply(6, 7));
    print("15 / 3 =");
    print_int(divide(15, 3));
    
    print("3. Testing Comparisons:");
    print("5 == 5:");
    print_int(is_equal(5, 5));
    print("10 > 5:");
    print_int(is_greater(10, 5));
    
    print("4. Testing Mathematical Functions:");
    print("abs(-15) =");
    print_int(absolute(-15));
    print("factorial(5) =");
    print_int(factorial(5));
    print("power(2, 3) =");
    print_int(power(2, 3));
    
    print("5. Testing Floating Point:");
    let radius: f32 = 5.0;
    let area: f32 = circle_area(radius);
    print("Circle area (radius=5):");
    print_float(area);
    
    print("6. Testing Control Flow:");
    let test_val: i32 = 10;
    
    if test_val > 5 {
        print("If condition works!");
    } else {
        print("If condition failed!");
    }
    
    print("7. Testing While Loop:");
    let counter: i32 = 1;
    while counter <= 5 {
        print_int(counter);
        counter = counter + 1;
    }
    
    print("8. Testing Nested Loops:");
    let i: i32 = 1;
    while i <= 3 {
        let j: i32 = 1;
        while j <= 2 {
            print_int(i * 10 + j);
            j = j + 1;
        }
        i = i + 1;
    }
    
    print("9. Interactive Test:");
    print("Enter two numbers:");
    let a: i32 = read_int();
    let b: i32 = read_int();
    
    print("You entered:");
    print_int(a);
    print_int(b);
    
    print("Sum:");
    print_int(add(a, b));
    print("Product:");
    print_int(multiply(a, b));
    print("Factorial of first:");
    print_int(factorial(a));
    
    print("=== ALL TESTS COMPLETED ===");
    print("✓ Constants (i32, f32)");
    print("✓ Variables (let declarations)");
    print("✓ Functions with parameters");
    print("✓ Integer arithmetic");
    print("✓ Float arithmetic");
    print("✓ Comparisons");
    print("✓ If-else statements");
    print("✓ While loops");
    print("✓ Recursion");
    print("✓ Interactive I/O");
    print("ÆLang comprehensive test successful!");
}
